- name: Run CloudSQL Monitor Script ðŸš€
        # ðŸ’¡ ULTIMATE FIX: Define ALL variables directly from secrets at the step level.
        env:
          PROJECT_ID: ${{ secrets.PROJECT_ID }}
          EMAIL_TO: ${{ secrets.EMAIL_TO }}
          EMAIL_FROM: ${{ secrets.EMAIL_FROM }}
          EMAIL_PASSWORD: ${{ secrets.EMAIL_PASSWORD }}
          
          GOOGLE_SERVICE_ACCOUNT_EMAIL: ${{ secrets.GOOGLE_SERVICE_ACCOUNT_EMAIL }}
          GOOGLE_PRIVATE_KEY_ID: ${{ secrets.GOOGLE_PRIVATE_KEY_ID }}
          GOOGLE_CLIENT_ID: ${{ secrets.GOOGLE_CLIENT_ID }}
          
          # Use double quotes for the multiline key
          GOOGLE_PRIVATE_KEY: "${{ secrets.GOOGLE_PRIVATE_KEY }}"
          
          # Define optional variables (SMTP and Teams) directly from secrets as well.
          SMTP_SERVER: ${{ secrets.SMTP_SERVER }}
          
          # Use a default fallback here as well, in case the secret is empty.
          SMTP_PORT: ${{ secrets.SMTP_PORT || '587' }} 
          
          TEAMS_WEBHOOK_URL: ${{ secrets.TEAMS_WEBHOOK_URL }}
          
        run: python test2.py
